<!DOCTYPE html>
<!--THIS PAGE IS GENERATED AUTOMATICALLY BY MAKEFILE ; TO EDIT THE SPEC WEBPAGE SEE HEAD.HTML ;-->
<html>
<head> 
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    TeX: {
      equationNumbers: {
        autoNumber: "AMS"
      }
    },
    tex2jax: {
      inlineMath: [ ['$','$'], ['\(', '\)'] ],
      displayMath: [ ['$$','$$'] ],
      processEscapes: true,
    }
  });
</script>
<script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<title>SPEC</title> 
<style>
table, th, td {
 border: 1px solid black;
 border-collapse: collapse;
}
th, td {
    padding: 2px;
}
</style>
</head>
<body>
<h4><b>SPEC</b> = the <b>S</b>tepped-<b>P</b>ressure <b>E</b>quilibrium <b>C</b>ode.</h4>
<ol>
<li> All relevant publications and presentations are given on the <a href="http://w3.pppl.gov/~shudson/Spec/spec.html">MRxMHD website</a>.
</li>
<li> There is also a <a href="http://theory.pppl.gov/research/research.php?rid=10#h5">brief description of SPEC</a> on the Princeton Plasma Physics Laboratory <a href="http://theory.pppl.gov/">Theory Department website</a>.
</li>
<li> An overview of the algorithm is given in a <a href="http://w3.pppl.gov/~shudson/Spec/SpecFlowchart.pdf">Flow Chart</a>.
</li>
<li> Please direct questions/suggestions to Stuart Hudson, shudson@pppl.gov, subject=spec.
</li>
<li> A detailed description of all subroutines etc. is given below.
</li>
</ol>
<p>
<table>
<tr><td><b>subroutine</b></td><td> </td><td><b>description</b></td></tr>

<tr><td><a href=global.pdf>global</a></td><td> (input) </td><td> Defines input namelists and global variables, and opens some output files.</td></tr>
<tr><td><a href=manual.pdf>manual</a></td><td> (documentation) </td><td> Code development schedule.</td></tr>
<tr><td><a href=preset.pdf>preset</a></td><td> (initialization) </td><td> Allocates and initializes internal arrays.</td></tr>
<tr><td><a href=rzaxis.pdf>rzaxis</a></td><td> (coordinate axis) </td><td> Specifies position of coordinate axis; ${\bf x}_a(\zeta) \equiv \int {\bf x}_1(\theta,\zeta) dl \, / \int dl$.</td></tr>
<tr><td><a href=packxi.pdf>packxi</a></td><td> (&ldquo;packing&rdquo;) </td><td> Packs, and unpacks, geometrical degrees of freedom; ${\bf \xi} \leftrightarrow \{ R_{i,l},Z_{i,l} \}$.</td></tr>
<tr><td><a href=volume.pdf>volume</a></td><td> </td><td> Calculates volume of each region; ${\cal V}_i \equiv \int dv$.</td></tr>
<tr><td><a href=coords.pdf>coords</a></td><td> (geometry) </td><td> Calculates coordinates, ${\bf x}(s,\theta,\zeta) \equiv R \, {\bf e}_R + Z \, {\bf e}_Z$, and metrics, using FFTs.</td></tr>
<tr><td><a href=metrix.pdf>metrix</a></td><td> (metrics) </td><td> Calculates the metric quantities, $\sqrt g \, g^{\mu\nu}$, which are required for the energy and helicity integrals.</td></tr>
<tr><td><a href=ma00aa.pdf>ma00aa</a></td><td> (integrals) </td><td> Calculates volume integrals of Chebyshev-polynomials and metric elements.</td></tr>
<tr><td><a href=matrix.pdf>matrix</a></td><td> (build matrices) </td><td> Constructs matrices that represent the Beltrami linear system.</td></tr>
<tr><td><a href=mp00ac.pdf>mp00ac</a></td><td> (solver) </td><td> Solves Beltrami/vacuum (linear) system, given matrices.</td></tr>
<tr><td><a href=ma02aa.pdf>ma02aa</a></td><td> (solver/driver) </td><td> Constructs Beltrami field in given volume consistent with constraints.</td></tr>
<tr><td><a href=packab.pdf>packab</a></td><td> (&ldquo;packing&rdquo;) </td><td> Packs, and unpacks, Beltrami field solution vector; ${\bf a}\equiv\{A_{\theta,e,i,l}, A_{\zeta,e,i,l}, etc.\}$.</td></tr>
<tr><td><a href=tr00ab.pdf>tr00ab</a></td><td> (transform) </td><td> Calculates transform, \( \iota \hspace{-0.35em}\)-\( = \dot \theta ( 1 + \lambda_\theta) + \lambda_\zeta \), given ${\bf B}|_{\cal I}$.</td></tr>
<tr><td><a href=curent.pdf>curent</a></td><td> (currents) </td><td> Computes the plasma current, $I \equiv \int B_\theta \, d\theta$, and the &ldquo;linking&rdquo; current, $G \equiv \int B_\zeta \, d\zeta$.</td></tr>
<tr><td><a href=df00ab.pdf>df00ab</a></td><td> </td><td> Evaluates volume integrals, and their derivatives w.r.t. interface geometry, using &ldquo;packed&rdquo; format.</td></tr>
<tr><td><a href=lforce.pdf>lforce</a></td><td> (&ldquo;local&rdquo; force) </td><td> Computes $B^2$, and the spectral condensation constraints if required, on the interfaces, ${\cal I}_i$.</td></tr>
<tr><td><a href=brcast.pdf>brcast</a></td><td> (parallel) </td><td> Broadcasts Beltrami fields, profiles, . . .</td></tr>
<tr><td><a href=dforce.pdf>dforce</a></td><td> (&ldquo;global&rdquo; force) </td><td> Given &ldquo;position&rdquo;, ${\bf \xi}$, computes ${\bf F}({\bf \xi})$ and $\nabla_{\bf \xi}{\bf F}$.</td></tr>
<tr><td><a href=newton.pdf>newton</a></td><td> (force-driver) </td><td> Solves ${\bf F}({\bf \xi})=0$, where ${\bf F} \equiv \{ [[p+B^2/2]]_{i,l}, I_{i,l} \}$ and ${\bf \xi} \equiv \{ R_{i,l},Z_{i,l} \}$.</td></tr>
<tr><td><a href=casing.pdf>casing</a></td><td> (free-boundary) </td><td> Constructs magnetic field at external location produced by internal plasma currents.</td></tr>
<tr><td><a href=bnorml.pdf>bnorml</a></td><td> (free-boundary) </td><td> Computes ${\bf B}_{Plasma} \cdot {\bf e}_\theta \times {\bf e}_\zeta \;$ on the computational boundary, $\partial {\cal D}$.</td></tr>
<tr><td><a href=jo00aa.pdf>jo00aa</a></td><td> (diagnostic) </td><td> Measures error in Beltrami equation, $\nabla \times {\bf B} - \mu {\bf B}$.</td></tr>
<tr><td><a href=pp00aa.pdf>pp00aa</a></td><td> (diagnostic) </td><td> Constructs Poincar&eacute; plot and &ldquo;approximate&rdquo; rotational-transform (driver).</td></tr>
<tr><td><a href=pp00ab.pdf>pp00ab</a></td><td> (diagnostic) </td><td> Follows magnetic fieldline using NAG ode-integration routine, D02BJF.</td></tr>
<tr><td><a href=bfield.pdf>bfield</a></td><td> (diagnostic) </td><td> Returns the magnetic field field line equations, $d{\bf x}/d\phi = {\bf B}/B^\phi$.</td></tr>
<tr><td><a href=stzxyz.pdf>stzxyz</a></td><td> (diagnostic) </td><td> Calculates coordinates, ${\bf x}(s,\theta,\zeta) \equiv R \, {\bf e}_R + Z \, {\bf e}_Z$, and metrics, at given $(s,\theta,\zeta)$.</td></tr>
<tr><td><a href=sc00aa.pdf>sc00aa</a></td><td> (diagnostic) </td><td> Returns &ldquo;covariant&rdquo; magnetic field, ${\bf B} = B_s \nabla s + B_\theta \nabla \theta + B_\zeta \nabla \zeta$, on ${\cal I}$.</td></tr>
<tr><td><a href=hesian.pdf>hesian</a></td><td> (diagnostic) </td><td> Computes eigenvalues and eigenvectors of derivative matrix, $\nabla_{\bf \xi}{\bf F}$.</td></tr>
<tr><td><a href=ra00aa.pdf>ra00aa</a></td><td> (output) </td><td> Writes vector potential to .ext.sp.A .</td></tr>
<tr><td><a href=numrec.pdf>numrec</a></td><td> (numerics) </td><td> Some miscellaneous numerical routines.
</td></tr>
<tr><td><a href=xspech.pdf>xspech</a></td><td> (main) </td><td> Main program.</td></tr>
<tr><td><a href=hdfint.pdf>hdfint</a></td><td> (output) </td><td> Writes all the output information to ext.sp.h5.</td></tr>
</table></body></html>
